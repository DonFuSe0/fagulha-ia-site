(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[938],{3260:function(e,t,r){Promise.resolve().then(r.bind(r,8787)),Promise.resolve().then(r.bind(r,1647))},8787:function(e,t,r){"use strict";r.d(t,{default:function(){return n}});var a=r(7437),i=r(2265);function n(e){let{initial:t}=e,[r,n]=(0,i.useState)(()=>t?[t]:[]);return(0,i.useEffect)(()=>{if(!t)return;let e=setTimeout(()=>{n(e=>e.filter(e=>e.id!==t.id))},3e3);return()=>clearTimeout(e)},[t]),(0,a.jsx)("div",{className:"fixed top-4 right-4 z-[100] space-y-2",children:r.map(e=>(0,a.jsx)("div",{className:"min-w-[220px] max-w-[320px] rounded-xl border px-3 py-2 text-sm shadow-lg backdrop-blur\n           ".concat("success"===e.type?"bg-emerald-500/15 border-emerald-400/30 text-emerald-200":"error"===e.type?"bg-red-500/15 border-red-400/30 text-red-200":"bg-white/10 border-white/20 text-white/90"),children:e.message},e.id))})}},1647:function(e,t,r){"use strict";r.d(t,{default:function(){return n}});var a=r(7437),i=r(2265);function n(){let e=(0,i.useRef)(null),[t,r]=(0,i.useState)(null),[n,l]=(0,i.useState)(100),[s,d]=(0,i.useState)(!1),[o,c]=(0,i.useState)(null),[u,m]=(0,i.useState)(!1),p=(0,i.useMemo)(()=>t?URL.createObjectURL(t):null,[t]);async function h(e){if(e.preventDefault(),c(null),m(!1),!t){c("Selecione uma imagem.");return}if(t.size>2097152){c("M\xe1ximo 2MB.");return}d(!0);try{let e=new FormData;if(e.append("file",t),e.append("zoom",String(n)),!(await fetch("/api/profile/avatar",{method:"POST",body:e})).ok)throw Error("upload_failed");m(!0),setTimeout(()=>window.location.href="/settings?tab=perfil&toast=avatar_ok",300)}catch(e){c("Falha ao enviar avatar.")}finally{d(!1)}}return(0,a.jsxs)("form",{onSubmit:h,className:"grid gap-3",children:[(0,a.jsx)("div",{className:"text-sm text-neutral-400",children:"Avatar"}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("input",{ref:e,type:"file",accept:"image/png,image/jpeg,image/webp",onChange:e=>{var t,a;return r(null!==(a=null===(t=e.target.files)||void 0===t?void 0:t[0])&&void 0!==a?a:null)},className:"hidden"}),(0,a.jsx)("button",{type:"button",onClick:()=>{var t;return null===(t=e.current)||void 0===t?void 0:t.click()},className:"rounded-lg border border-white/20 bg-white/10 px-4 py-2 text-white hover:bg-white/15",children:t?"Trocar arquivo":"Escolher arquivo"})]}),t&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"aspect-square w-48 overflow-hidden rounded-xl border border-white/15 bg-black/40",children:(0,a.jsx)("img",{src:p,alt:"preview",style:{transform:"scale(".concat(n/100,")"),transformOrigin:"center center"},className:"h-full w-full object-cover"})}),(0,a.jsxs)("label",{className:"grid gap-1",children:[(0,a.jsx)("span",{className:"text-sm text-neutral-400",children:"Zoom"}),(0,a.jsx)("input",{type:"range",min:80,max:150,step:1,value:n,onChange:e=>l(parseInt(e.target.value))})]})]}),o&&(0,a.jsx)("div",{className:"rounded-lg border border-red-500/30 bg-red-900/20 px-3 py-2 text-sm text-red-200",children:o}),u&&(0,a.jsx)("div",{className:"rounded-lg border border-emerald-500/30 bg-emerald-900/20 px-3 py-2 text-sm text-emerald-200",children:"Avatar atualizado!"}),(0,a.jsx)("button",{disabled:s,className:"self-start rounded-lg border border-white/20 bg-white/10 px-4 py-2 text-white hover:bg-white/15 disabled:opacity-50",children:s?"Enviando...":"Salvar avatar"})]})}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=3260)}),_N_E=e.O()}]);