(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[271],{2863:function(e,r,t){Promise.resolve().then(t.bind(t,1746))},998:function(e,r,t){"use strict";t.d(r,{Z:function(){return s}});var n=t(7437),a=t(2265),o=t(357);function s(e){let{onVerify:r,onError:t,onExpire:s,theme:i="auto"}=e,l=o.env.NEXT_PUBLIC_TURNSTILE_SITE_KEY,c=(0,a.useRef)(null),u=(0,a.useRef)(null),[d,f]=(0,a.useState)(!0),[m,h]=(0,a.useState)(!1),p=(0,a.useRef)(!1);return((0,a.useEffect)(()=>{if(!l){h(!0),f(!1);return}let e=()=>{if(c.current&&window.turnstile)try{u.current&&(c.current.innerHTML="",u.current=null),u.current=window.turnstile.render(c.current,{sitekey:l,theme:i,callback:e=>{f(!1),r(e)},"error-callback":e=>{h(!0),f(!1),null==t||t(e)},"expired-callback":()=>{null==s||s(),u.current&&window.turnstile&&window.turnstile.reset(u.current)}}),f(!1)}catch(e){h(!0),f(!1),null==t||t(e)}};return(()=>{if(window.turnstile&&"function"==typeof window.turnstile.render){e();return}if(p.current)return;p.current=!0;let r=document.createElement("script");r.src="https://challenges.cloudflare.com/turnstile/v0/api.js?render=explicit";let n=setTimeout(()=>{window.turnstile||(h(!0),f(!1),null==t||t("Turnstile script did not load within expected time."))},1e4);r.onload=()=>{clearTimeout(n),window.turnstile?window.turnstile.ready(()=>{e()}):(h(!0),f(!1),null==t||t("Turnstile script loaded but 'turnstile' object not found."))},r.onerror=()=>{clearTimeout(n),h(!0),f(!1),null==t||t("Failed to load Turnstile script")},document.head.appendChild(r)})(),()=>{u.current&&window.turnstile&&window.turnstile.remove(u.current),c.current&&(c.current.innerHTML=""),u.current=null}},[l,r,t,s,i]),l)?m?(0,n.jsxs)("div",{className:"rounded-lg border border-red-500/30 bg-red-500/10 p-3",children:[(0,n.jsx)("div",{className:"text-xs text-red-400",children:"⚠️ Erro ao carregar verifica\xe7\xe3o de seguran\xe7a"}),(0,n.jsx)("div",{className:"text-xs text-red-300 mt-1 mb-2",children:"Verifique sua conex\xe3o e tente novamente."}),(0,n.jsx)("button",{type:"button",onClick:()=>{h(!1),f(!0),p.current=!1,window.location.reload()},className:"px-3 py-1 text-xs rounded bg-orange-500/20 hover:bg-orange-500/30 text-orange-400 border border-orange-500/30 transition-colors",children:"Tentar novamente"})]}):(0,n.jsx)("div",{className:"space-y-2",children:(0,n.jsx)("div",{ref:c,className:"min-h-[65px] flex items-center justify-center",children:d&&(0,n.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-400",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-orange-500"}),(0,n.jsx)("span",{children:"Carregando verifica\xe7\xe3o..."})]})})}):(0,n.jsxs)("div",{className:"rounded-lg border border-red-500/30 bg-red-500/10 p-3",children:[(0,n.jsxs)("div",{className:"text-xs text-red-400",children:["⚠️ Configura\xe7\xe3o necess\xe1ria: ",(0,n.jsx)("code",{children:"NEXT_PUBLIC_TURNSTILE_SITE_KEY"})]}),(0,n.jsx)("div",{className:"text-xs text-red-300 mt-1",children:"Configure a vari\xe1vel de ambiente na Vercel e fa\xe7a redeploy."})]})}},1746:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return i}});var n=t(7437),a=t(2265),o=t(6463),s=t(998);function i(){let e=(0,o.useRouter)(),[r,t]=(0,a.useState)(""),[i,l]=(0,a.useState)(""),[c,u]=(0,a.useState)(""),[d,f]=(0,a.useState)(null),[m,h]=(0,a.useState)(!1),[p,x]=(0,a.useState)(null);async function v(t){if(t.preventDefault(),x(null),!d){x("Por favor, complete a verifica\xe7\xe3o de seguran\xe7a antes de continuar.");return}if(i.length<6){x("A senha deve ter pelo menos 6 caracteres.");return}h(!0);try{let t=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,password:i,nickname:c,turnstileToken:d})}),s=await t.json().catch(()=>({}));if(t.ok&&(null==s?void 0:s.ok)!==!1)e.push("/auth/confirmar-email");else{var n,a,o;(null==s?void 0:s.error)==="captcha_failed"?x("Falha na verifica\xe7\xe3o de seguran\xe7a. Tente recarregar a p\xe1gina."):(null==s?void 0:null===(n=s.error)||void 0===n?void 0:n.includes("User already registered"))?x("Este e-mail j\xe1 est\xe1 cadastrado. Tente fazer login ou use outro e-mail."):(null==s?void 0:null===(a=s.error)||void 0===a?void 0:a.includes("Password should be at least"))?x("A senha deve ter pelo menos 6 caracteres."):(null==s?void 0:null===(o=s.error)||void 0===o?void 0:o.includes("Unable to validate email address"))?x("E-mail inv\xe1lido. Verifique o formato do e-mail."):x((null==s?void 0:s.error)||"N\xe3o foi poss\xedvel criar sua conta. Tente novamente.")}}catch(e){x("Erro de conex\xe3o. Tente novamente.")}finally{h(!1)}}return(0,n.jsx)("main",{className:"min-h-[80vh] w-full flex items-center justify-center p-6",children:(0,n.jsxs)("div",{className:"w-full max-w-md space-y-4",children:[(0,n.jsxs)("div",{className:"text-center space-y-2",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold",children:"Criar conta"}),(0,n.jsx)("p",{className:"text-sm text-gray-400",children:"Junte-se \xe0 Fagulha IA"})]}),p&&(0,n.jsx)("div",{className:"rounded-lg border border-red-500/30 bg-red-500/10 p-3 text-sm text-red-400",children:p}),(0,n.jsxs)("form",{onSubmit:v,className:"space-y-4 rounded-2xl border border-white/10 bg-white/[0.04] p-6 shadow-xl",children:[(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)("label",{className:"text-sm opacity-80",children:"Apelido"}),(0,n.jsx)("input",{type:"text",value:c,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 rounded-lg bg-black/50 border border-white/10 outline-none focus:border-orange-500/50 transition-colors",placeholder:"Seu apelido",disabled:m})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)("label",{className:"text-sm opacity-80",children:"E-mail"}),(0,n.jsx)("input",{type:"email",required:!0,value:r,onChange:e=>t(e.target.value),className:"w-full px-3 py-2 rounded-lg bg-black/50 border border-white/10 outline-none focus:border-orange-500/50 transition-colors",placeholder:"voce@email.com",disabled:m})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)("label",{className:"text-sm opacity-80",children:"Senha"}),(0,n.jsx)("input",{type:"password",required:!0,value:i,onChange:e=>l(e.target.value),className:"w-full px-3 py-2 rounded-lg bg-black/50 border border-white/10 outline-none focus:border-orange-500/50 transition-colors",placeholder:"••••••••",disabled:m,minLength:6}),(0,n.jsx)("p",{className:"text-xs text-gray-500",children:"M\xednimo de 6 caracteres"})]}),(0,n.jsxs)("div",{className:"pt-2",children:[(0,n.jsx)(s.Z,{onVerify:e=>{f(e),x(null)},onError:()=>{f(null),x("Falha na verifica\xe7\xe3o de seguran\xe7a. Tente recarregar a p\xe1gina.")},onExpire:()=>{f(null),x("Verifica\xe7\xe3o expirada. Complete novamente a verifica\xe7\xe3o de seguran\xe7a.")},theme:"dark"}),(0,n.jsx)("p",{className:"text-xs opacity-70 mt-2 text-center",children:"Protegido por Cloudflare Turnstile"})]}),(0,n.jsx)("button",{type:"submit",disabled:m||!d,className:"w-full px-4 py-3 rounded-lg font-semibold transition disabled:opacity-50 disabled:cursor-not-allowed bg-orange-500 hover:bg-orange-600 focus:ring-2 focus:ring-orange-500/50",children:m?"Criando...":"CRIAR CONTA"}),(0,n.jsxs)("div",{className:"text-center space-y-2",children:[(0,n.jsx)("p",{className:"text-xs opacity-70",children:"Ao criar sua conta, voc\xea concorda com nossos termos de uso."}),(0,n.jsxs)("p",{className:"text-xs opacity-70",children:["J\xe1 tem conta?"," ",(0,n.jsx)("a",{href:"/auth/login",className:"underline hover:text-orange-400 transition-colors",children:"Fazer login"})]})]})]})]})})}},6463:function(e,r,t){"use strict";var n=t(1169);t.o(n,"usePathname")&&t.d(r,{usePathname:function(){return n.usePathname}}),t.o(n,"useRouter")&&t.d(r,{useRouter:function(){return n.useRouter}})},357:function(e,r,t){"use strict";var n,a;e.exports=(null==(n=t.g.process)?void 0:n.env)&&"object"==typeof(null==(a=t.g.process)?void 0:a.env)?t.g.process:t(8081)},8081:function(e){!function(){var r={229:function(e){var r,t,n,a=e.exports={};function o(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function i(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{t="function"==typeof clearTimeout?clearTimeout:s}catch(e){t=s}}();var l=[],c=!1,u=-1;function d(){c&&n&&(c=!1,n.length?l=n.concat(l):u=-1,l.length&&f())}function f(){if(!c){var e=i(d);c=!0;for(var r=l.length;r;){for(n=l,l=[];++u<r;)n&&n[u].run();u=-1,r=l.length}n=null,c=!1,function(e){if(t===clearTimeout)return clearTimeout(e);if((t===s||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(e);try{t(e)}catch(r){try{return t.call(null,e)}catch(r){return t.call(this,e)}}}(e)}}function m(e,r){this.fun=e,this.array=r}function h(){}a.nextTick=function(e){var r=Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)r[t-1]=arguments[t];l.push(new m(e,r)),1!==l.length||c||i(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=h,a.addListener=h,a.once=h,a.off=h,a.removeListener=h,a.removeAllListeners=h,a.emit=h,a.prependListener=h,a.prependOnceListener=h,a.listeners=function(e){return[]},a.binding=function(e){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw Error("process.chdir is not supported")},a.umask=function(){return 0}}},t={};function n(e){var a=t[e];if(void 0!==a)return a.exports;var o=t[e]={exports:{}},s=!0;try{r[e](o,o.exports,n),s=!1}finally{s&&delete t[e]}return o.exports}n.ab="//";var a=n(229);e.exports=a}()}},function(e){e.O(0,[971,23,744],function(){return e(e.s=2863)}),_N_E=e.O()}]);