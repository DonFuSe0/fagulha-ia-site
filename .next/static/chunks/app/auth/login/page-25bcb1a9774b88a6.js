(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[716],{7816:function(e,r,t){Promise.resolve().then(t.bind(t,2727))},998:function(e,r,t){"use strict";t.d(r,{Z:function(){return o}});var n=t(7437),i=t(2265),a=t(357);function o(e){let{onVerify:r,onError:t,onExpire:o,theme:s="auto"}=e,l=a.env.NEXT_PUBLIC_TURNSTILE_SITE_KEY,c=(0,i.useRef)(null),u=(0,i.useRef)(null),[d,f]=(0,i.useState)(!0),[m,h]=(0,i.useState)(!1),p=(0,i.useRef)(!1);return((0,i.useEffect)(()=>{if(!l){h(!0),f(!1);return}let e=()=>{if(c.current&&window.turnstile)try{u.current&&(c.current.innerHTML="",u.current=null),u.current=window.turnstile.render(c.current,{sitekey:l,theme:s,callback:e=>{f(!1),r(e)},"error-callback":e=>{h(!0),f(!1),null==t||t(e)},"expired-callback":()=>{null==o||o(),u.current&&window.turnstile&&window.turnstile.reset(u.current)}}),f(!1)}catch(e){h(!0),f(!1),null==t||t(e)}};return(()=>{if(window.turnstile&&"function"==typeof window.turnstile.render){e();return}if(p.current)return;p.current=!0;let r=document.createElement("script");r.src="https://challenges.cloudflare.com/turnstile/v0/api.js?render=explicit";let n=setTimeout(()=>{window.turnstile||(h(!0),f(!1),null==t||t("Turnstile script did not load within expected time."))},1e4);r.onload=()=>{clearTimeout(n),window.turnstile?window.turnstile.ready(()=>{e()}):(h(!0),f(!1),null==t||t("Turnstile script loaded but 'turnstile' object not found."))},r.onerror=()=>{clearTimeout(n),h(!0),f(!1),null==t||t("Failed to load Turnstile script")},document.head.appendChild(r)})(),()=>{u.current&&window.turnstile&&window.turnstile.remove(u.current),c.current&&(c.current.innerHTML=""),u.current=null}},[l,r,t,o,s]),l)?m?(0,n.jsxs)("div",{className:"rounded-lg border border-red-500/30 bg-red-500/10 p-3",children:[(0,n.jsx)("div",{className:"text-xs text-red-400",children:"⚠️ Erro ao carregar verifica\xe7\xe3o de seguran\xe7a"}),(0,n.jsx)("div",{className:"text-xs text-red-300 mt-1 mb-2",children:"Verifique sua conex\xe3o e tente novamente."}),(0,n.jsx)("button",{type:"button",onClick:()=>{h(!1),f(!0),p.current=!1,window.location.reload()},className:"px-3 py-1 text-xs rounded bg-orange-500/20 hover:bg-orange-500/30 text-orange-400 border border-orange-500/30 transition-colors",children:"Tentar novamente"})]}):(0,n.jsx)("div",{className:"space-y-2",children:(0,n.jsx)("div",{ref:c,className:"min-h-[65px] flex items-center justify-center",children:d&&(0,n.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-400",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-orange-500"}),(0,n.jsx)("span",{children:"Carregando verifica\xe7\xe3o..."})]})})}):(0,n.jsxs)("div",{className:"rounded-lg border border-red-500/30 bg-red-500/10 p-3",children:[(0,n.jsxs)("div",{className:"text-xs text-red-400",children:["⚠️ Configura\xe7\xe3o necess\xe1ria: ",(0,n.jsx)("code",{children:"NEXT_PUBLIC_TURNSTILE_SITE_KEY"})]}),(0,n.jsx)("div",{className:"text-xs text-red-300 mt-1",children:"Configure a vari\xe1vel de ambiente na Vercel e fa\xe7a redeploy."})]})}},2727:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return l},dynamic:function(){return s}});var n=t(7437),i=t(2265),a=t(6463),o=t(998);let s="force-dynamic";function l(){let e=(0,a.useRouter)(),[r,t]=(0,i.useState)(""),[s,l]=(0,i.useState)(""),[c,u]=(0,i.useState)(null),[d,f]=(0,i.useState)(!1),[m,h]=(0,i.useState)(null);async function p(t){if(t.preventDefault(),h(null),!c){h("Por favor, complete a verifica\xe7\xe3o de seguran\xe7a antes de continuar.");return}f(!0);try{let t=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,password:s,turnstileToken:c})}),a=await t.json().catch(()=>({}));if(t.ok&&(null==a?void 0:a.ok)!==!1)e.push("/dashboard");else{var n,i;(null==a?void 0:a.error)==="captcha_failed"?h("Falha na verifica\xe7\xe3o de seguran\xe7a. Tente recarregar a p\xe1gina."):(null==a?void 0:null===(n=a.error)||void 0===n?void 0:n.includes("Invalid login credentials"))?h("E-mail ou senha incorretos. Verifique suas credenciais."):(null==a?void 0:null===(i=a.error)||void 0===i?void 0:i.includes("Email not confirmed"))?h("Confirme seu e-mail antes de fazer login. Verifique sua caixa de entrada."):h((null==a?void 0:a.error)||"N\xe3o foi poss\xedvel entrar. Verifique suas credenciais.")}}catch(e){h("Erro de conex\xe3o. Tente novamente.")}finally{f(!1)}}return(0,n.jsx)("main",{className:"min-h-[80vh] w-full flex items-center justify-center p-6",children:(0,n.jsxs)("div",{className:"w-full max-w-md space-y-4",children:[(0,n.jsxs)("div",{className:"text-center space-y-2",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold",children:"Entrar"}),(0,n.jsx)("p",{className:"text-sm text-gray-400",children:"Acesse sua conta Fagulha IA"})]}),m&&(0,n.jsx)("div",{className:"rounded-lg border border-red-500/30 bg-red-500/10 p-3 text-sm text-red-400",children:m}),(0,n.jsxs)("form",{onSubmit:p,className:"space-y-4 rounded-2xl border border-white/10 bg-white/[0.04] p-6 shadow-xl",children:[(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)("label",{className:"text-sm opacity-80",children:"E-mail"}),(0,n.jsx)("input",{type:"email",required:!0,value:r,onChange:e=>t(e.target.value),className:"w-full rounded-lg bg-black/50 border border-white/10 px-3 py-2 outline-none focus:border-orange-500/50 transition-colors",placeholder:"seu@email.com",disabled:d})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)("label",{className:"text-sm opacity-80",children:"Senha"}),(0,n.jsx)("input",{type:"password",required:!0,value:s,onChange:e=>l(e.target.value),className:"w-full rounded-lg bg-black/50 border border-white/10 px-3 py-2 outline-none focus:border-orange-500/50 transition-colors",placeholder:"••••••••",disabled:d})]}),(0,n.jsxs)("div",{className:"pt-2",children:[(0,n.jsx)(o.Z,{onVerify:e=>{u(e),h(null)},onError:()=>{u(null),h("Falha na verifica\xe7\xe3o de seguran\xe7a. Tente recarregar a p\xe1gina.")},onExpire:()=>{u(null),h("Verifica\xe7\xe3o expirada. Complete novamente a verifica\xe7\xe3o de seguran\xe7a.")},theme:"dark"}),(0,n.jsx)("p",{className:"text-xs opacity-70 mt-2 text-center",children:"Protegido por Cloudflare Turnstile"})]}),(0,n.jsx)("button",{type:"submit",disabled:d||!c,className:"w-full px-4 py-3 rounded-lg font-semibold transition disabled:opacity-50 disabled:cursor-not-allowed bg-orange-500 hover:bg-orange-600 focus:ring-2 focus:ring-orange-500/50",children:d?"Entrando...":"Entrar"}),(0,n.jsx)("div",{className:"text-center",children:(0,n.jsxs)("p",{className:"text-xs opacity-70",children:["N\xe3o tem conta?"," ",(0,n.jsx)("a",{href:"/auth/signup",className:"underline hover:text-orange-400 transition-colors",children:"Criar cadastro"})]})})]})]})})}},6463:function(e,r,t){"use strict";var n=t(1169);t.o(n,"usePathname")&&t.d(r,{usePathname:function(){return n.usePathname}}),t.o(n,"useRouter")&&t.d(r,{useRouter:function(){return n.useRouter}})},357:function(e,r,t){"use strict";var n,i;e.exports=(null==(n=t.g.process)?void 0:n.env)&&"object"==typeof(null==(i=t.g.process)?void 0:i.env)?t.g.process:t(8081)},8081:function(e){!function(){var r={229:function(e){var r,t,n,i=e.exports={};function a(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{t="function"==typeof clearTimeout?clearTimeout:o}catch(e){t=o}}();var l=[],c=!1,u=-1;function d(){c&&n&&(c=!1,n.length?l=n.concat(l):u=-1,l.length&&f())}function f(){if(!c){var e=s(d);c=!0;for(var r=l.length;r;){for(n=l,l=[];++u<r;)n&&n[u].run();u=-1,r=l.length}n=null,c=!1,function(e){if(t===clearTimeout)return clearTimeout(e);if((t===o||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(e);try{t(e)}catch(r){try{return t.call(null,e)}catch(r){return t.call(this,e)}}}(e)}}function m(e,r){this.fun=e,this.array=r}function h(){}i.nextTick=function(e){var r=Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)r[t-1]=arguments[t];l.push(new m(e,r)),1!==l.length||c||s(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=h,i.addListener=h,i.once=h,i.off=h,i.removeListener=h,i.removeAllListeners=h,i.emit=h,i.prependListener=h,i.prependOnceListener=h,i.listeners=function(e){return[]},i.binding=function(e){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw Error("process.chdir is not supported")},i.umask=function(){return 0}}},t={};function n(e){var i=t[e];if(void 0!==i)return i.exports;var a=t[e]={exports:{}},o=!0;try{r[e](a,a.exports,n),o=!1}finally{o&&delete t[e]}return a.exports}n.ab="//";var i=n(229);e.exports=i}()}},function(e){e.O(0,[971,23,744],function(){return e(e.s=7816)}),_N_E=e.O()}]);